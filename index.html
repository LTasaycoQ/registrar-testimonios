<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap' rel='stylesheet'>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="assets/Iconos/logo.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>Fiesta Tours Peru</title>

</head>

<body
    class="bg-[url('https://www.fiesta-tours-peru.com/img/slider/escritorio/machu_picchu.jpg')] bg-cover  w-full h-full ">

    <header class="header ">

        <div class="header_content header-menu">
            <div class="responsive__menu">
                <i id="menu_responsive" class="bi bi-list"></i>
                <a class="logo" href="https://ltasaycoq.github.io/Fiestas_Tour_peru/"></a>

            </div>
            <a class="header_reseva" href="https://www.fiesta-tours-peru.com/reservas.html">Reservar</a>
        </div>


        <nav class="menu_responsive" aria-label="Main navigation">
            <ul class="list-ul-responsive">
                <li><a class="enlace_menu" href="#inicio">Inicio</a></li>
                <li><a class="enlace_menu" href="#nosostros">Nosotros</a></li>
                <li><a class="enlace_menu" href="#experiencias">Experiencias</a></li>
                <li><a class="enlace_menu" href="#testimonios">Testimonios</a></li>
            </ul>
        </nav>
    </header>

    <main class=" p-[15px] gap-[40px] flex justify-center items-center ">


        <div class="bg-gray-200 mt-[150px] mb-[200px] w-[500px] p-[25px] rounded-lg">
            <form class="flex flex-col gap-[20px] w-full">

                <label for="Nombre">Nombres</label>
                <input id="name" requerid placeholder="ejm: Luis Tasayco"
                    class="text-[12px] w-full rounded-[8px] p-[10px] outline-none h-[30px]" type="text">

                <label for="Fecha">Fechas</label>
                <input id="date" class="text-[12px] w-full rounded-[8px] p-[10px] outline-none h-[30px]" type="date">

                <label for="Comentario">Comentarios</label>
                <textarea id="coment" requerid placeholder="Escribir tu comentario"
                    class="text-[12px] w-full rounded-[8px] p-[10px] outline-none h-[140px]" name="comentario"
                    id="comentario"></textarea>

                <button id="btn-enviar" class="block bg-indigo-500 text-white font-black p-[5px] rounded-lg">Enviar
                    datos
                </button>
                <button id="btn-cargando" type="button"
                    class="flex justify-center items-center hidden bg-indigo-500 text-white font-black p-[5px] rounded-lg"
                    disabled="">
                    <svg class="mr-3 -ml-1 size-5 animate-spin text-white" xmlns="http://www.w3.org/2000/svg"
                        fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                        </circle>
                        <path class="opacity-75" fill="currentColor"
                            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z">
                        </path>
                    </svg>
                    Processingâ€¦
                </button>

            </form>


        </div>
    </main>

    <script src="nav.js"></script>

    <script>

        document.getElementById("btn-enviar").addEventListener("click", function (event) {
            event.preventDefault();
            const name = document.getElementById("name").value;
            const comentario = document.getElementById("coment").value;
            const fecha = document.getElementById("date").value;

            console.log("Data: ",name, comentario, fecha);
            if (name != "" && comentario != "" && fecha != "") {
                document.getElementById("btn-enviar").style.display = "none";
                document.getElementById("btn-cargando").style.display = "block";
                enviarDatos(name, comentario, fecha);
            } else {
                Swal.fire({
                    icon: "error",
                    title: "Error",
                    text: "Por favor complete los campos",
                });
                document.getElementById("btn-cargando").style.display = "none";
            }
        });

        async function enviarDatos(name, comentario, fecha) {
            const API_URL = 'https://script.google.com/macros/s/AKfycby6GJdenruR2qPBq28AJIfKURCl9xblAjNnWEWk6W2l0D9dgbdM1J1yCyRmfFNiKH3q-g/exec';
            
            const payload = {
                nombres: name,
                fecha: fecha,
                texto: comentario
            };
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: {
                        'Content-Type': 'text/plain',
                    },
                    body: JSON.stringify(payload)
                });

                Swal.fire({
                    title: "Enviado",
                    text: "Su comentario se registro!",
                    icon: "success"
                });
                document.getElementById("btn-cargando").style.display = "none";
                document.getElementById("btn-enviar").style.display = "block";
            } catch (error) {
                  Swal.fire({
                    icon: "error",
                    title: "Error",
                    text: "Ocurrio un problema al registrar su Comentario",
                });
            }
        }


    </script>

</body>

</html>